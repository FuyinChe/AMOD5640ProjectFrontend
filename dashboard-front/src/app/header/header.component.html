<header class="header">
  <!-- Top Navigation Bar -->
  <div class="header__top-bar">
    <div class="header__logo-nav">
      <div class="header__logo-container">
        <img src="/images/logo.webp" alt="Trent University Logo">
      </div>
    </div>

    <div class="header__menuSearch">
      <div class="header__top-nav">
        <a href="https://www.trentu.ca/" class="header__top-nav-item">PETERBOROUGH</a>
        <a href="https://www.trentu.ca/durham/" class="header__top-nav-item">DURHAM GTA</a>
        <a href="https://www.trentu.ca/online/" class="header__top-nav-item">ONLINE</a>
        <a href="https://www.trentu.ca/mytrent" class="header__top-nav-item header__top-nav-item--mytrent">MYTRENT</a>
      </div>

      <div class="header__search-menu-container">
        <div class="header__search">
          <input type="text" placeholder="Search" class="header__search-input" required autocomplete="off">
          <button class="header__search-button">
            <svg class="header__search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M10 2a8 8 0 100 16 8 8 0 000-16zM3 10a7 7 0 1114 0 7 7 0 01-14 0zM18 18l4.5 4.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>

        <button class="header__menu-button">
          <span class="header__menu-text">MENU</span>
          <span class="header__menu-icon-lines">
            <span class="header__menu-icon-line"></span>
            <span class="header__menu-icon-line"></span>
            <span class="header__menu-icon-line"></span>
          </span>
        </button>
      </div>
    </div>
  </div>

  <!-- Bottom Navigation Bar -->
  <div class="header__bottom-bar">
    <nav class="header__bottom-nav">
      <a routerLink="/home" class="header__bottom-nav-title">TRENT FARM DATA</a>
      <ul class="header__bottom-nav-list">

        <li class="header__bottom-nav-item" routerLinkActive="header__bottom-nav-item--active" [routerLinkActiveOptions]="{ exact: true }">
          <a class="header__bottom-nav-link" routerLink="/">WELCOME</a>
        </li>

        <li class="header__bottom-nav-item" routerLinkActive="header__bottom-nav-item--active">
          <a class="header__bottom-nav-link" routerLink="/dashboard">DASHBOARD</a>
        </li>

        <li class="header__bottom-nav-item" routerLinkActive="header__bottom-nav-item--active">
          <a class="header__bottom-nav-link" routerLink="/download">DOWNLOAD</a>
        </li>

        <li class="header__bottom-nav-item" routerLinkActive="header__bottom-nav-item--active">
          <a class="header__bottom-nav-link" routerLink="/environmentalSampleData">SAMPLE DATA</a>
        </li>

        <li class="header__bottom-nav-item" routerLinkActive="header__bottom-nav-item--active">
          <a class="header__bottom-nav-link" routerLink="/about">ABOUT US</a>
        </li>
        <!-- Logged-in user dropdown -->
        <li
          class="header__bottom-nav-item header__user-dropdown"
          tabindex="0"
          (blur)="dropdownOpen = false"
          [hidden]="!auth.isLoggedIn()"
        >
          <div
            class="header__user-toggle"
            (click)="dropdownOpen = !dropdownOpen"
            aria-haspopup="true"
            [attr.aria-expanded]="dropdownOpen"
          >
            <img
              src="/images/default-avatar.png"
              alt="User Avatar"
              class="header__user-avatar"
              onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=%27http://www.w3.org/2000/svg%27 width=%2732%27 height=%2732%27 viewBox=%270 0 24 24%27 fill=%27%23777%27><circle cx=%2712%27 cy=%2712%27 r=%2710%27/></svg>'"
            />
            <span class="header__user-name">{{ auth.getUsername() }}</span>
            <svg
              class="header__dropdown-icon"
              xmlns="http://www.w3.org/2000/svg"
              width="12"
              height="12"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <polyline points="6 9 12 15 18 9" />
            </svg>
          </div>

          <ul
            class="header__user-menu"
            [class.header__user-menu--open]="dropdownOpen"
            role="menu"
            aria-label="User menu"
          >
            <li role="menuitem">
              <button (click)="logout()" class="header__logout-btn">Logout</button>
            </li>
          </ul>
        </li>

        <!-- Guest links -->
        <li
          class="header__bottom-nav-item"
          routerLinkActive="header__bottom-nav-item--active"
          [hidden]="auth.isLoggedIn()"
        >
          <a class="header__bottom-nav-link" routerLink="/register">REGISTER</a>
        </li>
        <li
          class="header__bottom-nav-item"
          routerLinkActive="header__bottom-nav-item--active"
          [hidden]="auth.isLoggedIn()"
        >
          <a class="header__bottom-nav-link" routerLink="/login">LOGIN</a>
        </li>
<!--        <li class="header__user-info">Welcome, {{ auth.getUsername() }}</li>-->
<!--        <li><button (click)="logout()" class="header__logout-btn">Logout</button></li>-->
      </ul>
    </nav>
  </div>
</header>
